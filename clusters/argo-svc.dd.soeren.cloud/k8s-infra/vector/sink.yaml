transforms:
  drop_namespaces:
    type: filter
    inputs:
      - drop_namespaces
    condition: >-
      exists(.kubernetes.namespace_name)
      && !(
        .kubernetes.namespace_name == "openebs" ||
        .kubernetes.namespace_name == "openebs"
      )

sinks:
  vlogs:
    inputs:
      - k8s
    type: elasticsearch
    endpoints:
      - http://victorialogs.monitoring/insert/elasticsearch/
    api_version: v8
    compression: gzip
    healthcheck:
      enabled: false
    query:
      _msg_field: message
      _time_field: timestamp
      _stream_fields: kubernetes.pod_namespace,kubernetes.pod_name
